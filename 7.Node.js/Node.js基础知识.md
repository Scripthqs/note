# Node.js基础知识

## API相关介绍

JavaScript 本身不提供任何与 I/O（输入/输出）相关的 API，都要靠宿主环境（host）提供，所以 JavaScript 只适合嵌入更大型的应用程序环境，去调用宿主环境提供的底层 API。

### JavaScript宿主环境

- 浏览器：最常见的环境
- 服务器环境: Node项目就是服务器环境

各种宿主环境提供额外的 API（即只能在该环境使用的接口），以便 JavaScript 调用。

### 什么是API

应用程序接口（Application Programming Interface），简称API，是基于编程语言构建的结构，使开发人员更容易地创建复杂的功能。

API抽象了复杂的代码，并提供一些简单的接口规则可以直接使用。

在 Web 开发中，API 通常是开发者能用在应用（app）中的一系列代码特性（如 方法、属性 、事件和URL），这些特性被用于与用户的 web 浏览器中的组件、用户电脑上的其他软硬件或者第三方软件与服务交互。

- `getUserMedia API` 能被用于从用户的摄像头采集音视频
- `Geolocation API` 能被用于从用户的可用的任意定位设备（如 GPS）获取位置信息
- `Web Animations API` 能被用于制作一个网页中的动画，例如让网页中的图片移动或旋转

浏览器环境提供的额外API可以分成三大类：

- 浏览器控制类：操作浏览器
- DOM 类 API：操作网页的各种元素
- Web 类：实现互联网的各种功能

服务器环境主要提供操作系统的API，包括

- 文件操作 API
- 网络通信 API

**浏览器API**内置于Web浏览器中，能从浏览器环境中提取数据，并用来做有用的复杂的事情。

**第三方API**一般情况下不会内置于浏览器中，通常在第三方程序中。

### API作用

- 用来操控网站所基于的浏览器与操作系统的不同方面，或是操控由其他网站或服务端传来的数据
- 操作文档
  - 在制作Web页面和APP时，我们就是使用DOM提供的API来控制的HTML和样式信息，
- 从服务器获取数据 允许网页直接处理对服务器上可用的特定资源的 HTTP 请求，并在显示之前根据需要对结果数据进行格式化。称为`Ajax`技术。
- 绘制图形
- 视频和音频API
- 客户端存储

## Node.js概述

- Node.js不是一门语言，也不是JavaScript的框架。
- Node.js是JavaScript在服务器端的运行环境（平台）。
- Node.js没有BOM和DOM相关的API，但是新增了一些 Node.js相关的API。
- Node环境提供了一些附加API，包括文件、网络等相关的 API。

Node.js 扩展了 JS 在后端的能力（比如 I/O 操作、文件读写、数据库操作等）。使得 JS 既可以在前端进行 DOM 操作（浏览器前端），又可以在后端调用操作系统资源。

JavaScript是目前最简单的全栈式语言。

### Node.js运行环境的核心

Node.js 运行环境的核心是V8引擎和libuv库。

- V8引擎：编译和执行JS代码、管理内存、垃圾回收。V8 给JS提供了运行环境，可以说是 JS 的虚拟机。
- libuv：是一个专注于异步 I/O 的跨平台类库，目前主要在 Node.js 上使用。

V8 的内存限制：在一般的后端开发语言中，在基本的内存使用上没有什么限制，然而在 Node 中通过 JavaScript 使用内存时就会发现只能使用部分内存（64 位系统下约为 1.4GB，32 位系统下约为 0.7GB）。在这样的限制下，将会导致 Node 无法直接操作大内存对象。

### Node.js的应用

1. BFF中间层
   - 服务于前端的后端（Backend For Frontend）
   - 让前端有能力自由组装后台数据
   - 前端开发者能够自主决定与后台的通讯方式
   - 安全性更高（不会把主服务器暴露在外面）、降低主服务器的复杂度
2. 服务端渲染
   - SSR / Server Side Render
   - 服务器返回的不是接口数据，而是一整个页面（或整个楼层）的HTML字符串，浏览器直接显示即可
   - 在服务器端直接就渲染好了，然后一次性打包返回给前端。
   - 优点是有利于 SEO、首屏渲染很快

3. 做小型服务、小型网站的后端（基于 Express、Koa 框架）
   - 很多公司的后台管理系统，都是用 Node.js 来开发接口
   - 后台管理系统对性能和并发的要求不是太高
4. 做项目构建工具
   - 前端正在广泛使用的构建工具 gulp、Webpack，就是基于 Node.js 来实现的
5. 做 PC 端的软件（基于 Electron 框架）
   - Electron是Node.js在PC客户端的技术。
   - 代码编辑器VSCode软件，就是用JS语言实现的。

### 其他

客户端渲染：

- CSR / Client side render
- 前端通过一大堆接口请求数据，然后通过JS动态处理和生成页面结构和展示
- 优点是前后端分离、减小服务器压力、局部刷新
- 缺点是不利于 SEO（如果你的页面然后通过 Ajax 异步获取内容，抓取工具并不会等待异步完成后再行抓取页面内容）
- 首屏渲染慢

服务端渲染

- 搜索引擎优化
- 首屏速度优化

前端会Node.js不能代表就是一名全栈工程师，

- Node.js的出现，让JS语言实现了前后端语法的统一，让 JS 语言的技术栈更佳全面。
- 语言只是一种工具。
- 涉及到后台开发相关的技术还有很多需要学习。

## Node.js安装



## NPM使用介绍

NPM是随同Node.js一起安装的包管理工具，能解决NodeJS代码部署上的很多问题，常见的使用场景有以下几种；

- 允许用户从NPM服务器下载别人编写的第三方包到本地使用。
- 允许用户从NPM服务器下载并安装别人编写的命令行程序到本地使用。
- 允许用户将自己编写的包或命令行程序上传到NPM服务器供别人使用。