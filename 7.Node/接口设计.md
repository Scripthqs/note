# 接口设计

## 接口安全

前后端分离式开发需要接口进行数据交互，传输的数据被偷窥，被抓包，被伪造时有发生，那么如何设计一套比较安全的API接口方案。

并不是所有的接口都需要考虑安全的，有些接口是公开的，任何人只要知道地址都可以调用，对于一些项目中需要用户登录才能访问的接口才需要考虑安全问题。

一般的解决方法：

- token令牌认证（jwt）
- AK（app key）& SK（secret key）用户名和密码
- 时间戳超时验证+签名算法字符串
- URL签名（算法，非对称算法）
- 数据脱敏（防范数据库数据泄漏）
- HTTPS 数字证书（防运营商）
- IP黑/白名单，服务器层面的限制，apache,ngix
- oAuth2.0

## jwt的工作原理

jwt(json web token)，是基于token的鉴权机制，类似于http协议也是无状态的，它不需要在服务器端去保留用户的认证信息或者会话信息，为应用的拓展提供了便利。jwt具备一下几个优点：

- 因json的通用性，所以jwt是可以进行跨语言
- jwt可以在自身存储一些其他业务逻辑所必要的非敏感信息
- 便于传输，jwt的构成非常简单，字节占用很小
- 它不需要存储在服务器端保存会话信息，非常适合应用在前后端分离的项目上

使用jwt进行鉴权的工作流程：

1. 用户使用用户名密码来请求服务器
2. 服务器进行验证用户的信息（查数据库）
3. 服务器通过验证发送给用户一个token（令牌）
4. 客户端存储token（vuex + localStorage），并在每次请求时附上这个token
5. 服务端验证token值，并返回数据

